import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.a7175731.js";const p="/assets/image-20230519111655975.e8c39b73.png",F=JSON.parse('{"title":"模型管理 --笔记","description":"","frontmatter":{},"headers":[],"relativePath":"GIS/Cesium/一、模型管理.md","filePath":"GIS/Cesium/一、模型管理.md","lastUpdated":null}'),o={name:"GIS/Cesium/一、模型管理.md"},e=l(`<h1 id="模型管理-笔记" tabindex="-1">模型管理 --笔记 <a class="header-anchor" href="#模型管理-笔记" aria-label="Permalink to &quot;模型管理 --笔记&quot;">​</a></h1><h2 id="一、模型位置及加载" tabindex="-1">一、模型位置及加载 <a class="header-anchor" href="#一、模型位置及加载" aria-label="Permalink to &quot;一、模型位置及加载&quot;">​</a></h2><blockquote><p>相关类及属性：Cesium3DTileset、</p></blockquote><h4 id="cesium3dtileset" tabindex="-1">Cesium3DTileset <a class="header-anchor" href="#cesium3dtileset" aria-label="Permalink to &quot;Cesium3DTileset&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">HkScrFlyTo</span><span style="color:#E1E4E8;">(){</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 通过IonResource方式加载</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// const tileSet = this.HkScrViewer.scene.primitives.add(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//   new Cesium.Cesium3DTileset({</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     url: Cesium.IonResource.fromAssetId(1535979)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     // url: Cesium.IonResource.fromAssetId(BIM1343534) 村庄1535979  日本1343233  香港1343560</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//   })</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// );</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// this.HkScrViewer.flyTo(tileSet)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 通过指定位置 和 加载Cesium默认模型</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.HkScrViewer.camera.</span><span style="color:#B392F0;">flyTo</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">      destination: Cesium.Cartesian3.</span><span style="color:#B392F0;">fromDegrees</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">114.184499</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">22.301503</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2000</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.HkScrViewer.scene.primitives.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(Cesium.</span><span style="color:#B392F0;">createOsmBuildings</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">HkScrFlyTo</span><span style="color:#24292E;">(){</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 通过IonResource方式加载</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// const tileSet = this.HkScrViewer.scene.primitives.add(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//   new Cesium.Cesium3DTileset({</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     url: Cesium.IonResource.fromAssetId(1535979)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     // url: Cesium.IonResource.fromAssetId(BIM1343534) 村庄1535979  日本1343233  香港1343560</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//   })</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// );</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// this.HkScrViewer.flyTo(tileSet)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 通过指定位置 和 加载Cesium默认模型</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.HkScrViewer.camera.</span><span style="color:#6F42C1;">flyTo</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      destination: Cesium.Cartesian3.</span><span style="color:#6F42C1;">fromDegrees</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">114.184499</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">22.301503</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2000</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.HkScrViewer.scene.primitives.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(Cesium.</span><span style="color:#6F42C1;">createOsmBuildings</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span></code></pre></div><h2 id="二、模型高度" tabindex="-1">二、模型高度 <a class="header-anchor" href="#二、模型高度" aria-label="Permalink to &quot;二、模型高度&quot;">​</a></h2><blockquote><p>相关类及属性：Globe.depthTestAgainstTerrain、Viewer.zoomto(target, offset)、Matrix4</p></blockquote><h4 id="globe-depthtestagainstterrain" tabindex="-1">Globe.depthTestAgainstTerrain <a class="header-anchor" href="#globe-depthtestagainstterrain" aria-label="Permalink to &quot;Globe.depthTestAgainstTerrain&quot;">​</a></h4><blockquote><p>布尔值属性，用于指定地球表面上的三维对象是否应该进行深度测试。</p><ul><li>true <ul><li>渲染三维对象时将考虑求表面的深度，避免对象绘制在地球表面之下，因为通常生活中物体不会穿过地球表面</li></ul></li><li>false <ul><li>将会忽略地球表面的深度，导致三维对象与地球表面重叠，这在某些情况下是有用的，如地下管道 或者 洞穴系统</li></ul></li></ul></blockquote><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">viewer.scene.globe.depthTestAgainstTerrain </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">viewer.scene.globe.depthTestAgainstTerrain </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span></span></code></pre></div><h4 id="viewer-zoomto-target-offset" tabindex="-1">Viewer.zoomto(target, offset) <a class="header-anchor" href="#viewer-zoomto-target-offset" aria-label="Permalink to &quot;Viewer.zoomto(target, offset)&quot;">​</a></h4><p>其中offset ：Cesium.HeadingPitchRange(heading, pitch, range)</p><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th><th style="text-align:left;">Default</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>heading</code></td><td style="text-align:left;">Number</td><td style="text-align:left;"><code>0.0</code></td><td style="text-align:left;">optional以弧度表示的偏航角。</td></tr><tr><td style="text-align:left;"><code>pitch</code></td><td style="text-align:left;">Number</td><td style="text-align:left;"><code>0.0</code></td><td style="text-align:left;">optional以弧度表示的俯仰角。</td></tr><tr><td style="text-align:left;"><code>range</code></td><td style="text-align:left;">Number</td><td style="text-align:left;"><code>0.0</code></td><td style="text-align:left;">optional到中心的距离，单位是米。可以使用<code>tileset.boundingSphere.radius</code></td></tr></tbody></table><h4 id="matrix4" tabindex="-1">Matrix4 <a class="header-anchor" href="#matrix4" aria-label="Permalink to &quot;Matrix4&quot;">​</a></h4><p>模型平移矩阵</p><h4 id="实例代码" tabindex="-1">实例代码 <a class="header-anchor" href="#实例代码" aria-label="Permalink to &quot;实例代码&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">async </span><span style="color:#B392F0;">initViewer</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">            window.viewer </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> window.Cesium.</span><span style="color:#B392F0;">Viewer</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;cesium-container&quot;</span><span style="color:#E1E4E8;">, {</span></span>
<span class="line"><span style="color:#E1E4E8;">                imageryProvider: </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> window.Cesium.</span><span style="color:#B392F0;">ArcGisMapServerImageryProvider</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">                    url: </span><span style="color:#9ECBFF;">&#39;https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">                }),</span></span>
<span class="line"><span style="color:#E1E4E8;">                sceneMode: window.Cesium.SceneMode.</span><span style="color:#79B8FF;">SCENE3D</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                vrButton: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                animation: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                baseLayerPicker: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                geocoder: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                timeline: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                fullscreenButton: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                homeButton: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                creditContainer: document.</span><span style="color:#B392F0;">createElement</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;div&#39;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">                infoBox: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                navigationHelpButton: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                sceneModePicker: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                scene3DOnly: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                skyBox: </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> window.Cesium.</span><span style="color:#B392F0;">SkyBox</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">                    sources: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                        positiveX: </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;@/assets/images/tycho2t3_80_px.jpg&#39;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">                        negativeX: </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;@/assets/images/tycho2t3_80_mx.jpg&#39;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">                        positiveY: </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;@/assets/images/tycho2t3_80_py.jpg&#39;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">                        negativeY: </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;@/assets/images/tycho2t3_80_my.jpg&#39;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">                        positiveZ: </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;@/assets/images/tycho2t3_80_pz.jpg&#39;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">                        negativeZ: </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;@/assets/images/tycho2t3_80_mz.jpg&#39;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">                    }</span></span>
<span class="line"><span style="color:#E1E4E8;">                })</span></span>
<span class="line"><span style="color:#E1E4E8;">            });</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//开启地形深度检测</span></span>
<span class="line"><span style="color:#E1E4E8;">            window.viewer.scene.globe.depthTestAgainstTerrain </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//加载3dtiles模型、定位</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> tileset </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> window.Cesium.</span><span style="color:#B392F0;">Cesium3DTileset</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">                url: </span><span style="color:#9ECBFF;">&quot;/model/Tileset/示例建筑/tileset.json&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            }).readyPromise</span></span>
<span class="line"><span style="color:#E1E4E8;">            window.viewer.scene.primitives.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(tileset);</span></span>
<span class="line"><span style="color:#E1E4E8;">            window.viewer.</span><span style="color:#B392F0;">zoomTo</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">                tileset,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> window.Cesium.</span><span style="color:#B392F0;">HeadingPitchRange</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#79B8FF;">0.0</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">0.5</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                    tileset.boundingSphere.radius </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2.0</span></span>
<span class="line"><span style="color:#E1E4E8;">                )</span></span>
<span class="line"><span style="color:#E1E4E8;">            );</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// this.adjustTilesetHeight(tileset,200)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> height</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">setInterval</span><span style="color:#E1E4E8;">(()</span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">adjustTilesetHeight</span><span style="color:#E1E4E8;">(tileset,height</span><span style="color:#F97583;">++</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">adjustTilesetHeight</span><span style="color:#E1E4E8;">(tileset, height </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//计算出模型包围球的中心点(弧度制)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">cartographic</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.Cesium.Cartographic.</span><span style="color:#B392F0;">fromCartesian</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">                tileset.boundingSphere.center</span></span>
<span class="line"><span style="color:#E1E4E8;">            );</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//计算与模型包围球中心点经纬度相同的地表点位</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">surface</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.Cesium.Cartesian3.</span><span style="color:#B392F0;">fromRadians</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">                cartographic.longitude,</span></span>
<span class="line"><span style="color:#E1E4E8;">                cartographic.latitude,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">0.0</span></span>
<span class="line"><span style="color:#E1E4E8;">            );</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//计算调整高度后的模型包围球的中心点</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">offset</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.Cesium.Cartesian3.</span><span style="color:#B392F0;">fromRadians</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">                cartographic.longitude,</span></span>
<span class="line"><span style="color:#E1E4E8;">                cartographic.latitude,</span></span>
<span class="line"><span style="color:#E1E4E8;">                height</span></span>
<span class="line"><span style="color:#E1E4E8;">            );</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//计算差向量</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">translation</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.Cesium.Cartesian3.</span><span style="color:#B392F0;">subtract</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">                offset,</span></span>
<span class="line"><span style="color:#E1E4E8;">                surface,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> window.Cesium.</span><span style="color:#B392F0;">Cartesian3</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">            );</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//修改模型的变换矩阵</span></span>
<span class="line"><span style="color:#E1E4E8;">            tileset.modelMatrix </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.Cesium.Matrix4.</span><span style="color:#B392F0;">fromTranslation</span><span style="color:#E1E4E8;">(translation);</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">async </span><span style="color:#6F42C1;">initViewer</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">            window.viewer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> window.Cesium.</span><span style="color:#6F42C1;">Viewer</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;cesium-container&quot;</span><span style="color:#24292E;">, {</span></span>
<span class="line"><span style="color:#24292E;">                imageryProvider: </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> window.Cesium.</span><span style="color:#6F42C1;">ArcGisMapServerImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">                    url: </span><span style="color:#032F62;">&#39;https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer&#39;</span></span>
<span class="line"><span style="color:#24292E;">                }),</span></span>
<span class="line"><span style="color:#24292E;">                sceneMode: window.Cesium.SceneMode.</span><span style="color:#005CC5;">SCENE3D</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                vrButton: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                animation: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                baseLayerPicker: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                geocoder: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                timeline: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                fullscreenButton: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                homeButton: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                creditContainer: document.</span><span style="color:#6F42C1;">createElement</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;div&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">                infoBox: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                navigationHelpButton: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                sceneModePicker: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                scene3DOnly: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                skyBox: </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> window.Cesium.</span><span style="color:#6F42C1;">SkyBox</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">                    sources: {</span></span>
<span class="line"><span style="color:#24292E;">                        positiveX: </span><span style="color:#6F42C1;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;@/assets/images/tycho2t3_80_px.jpg&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">                        negativeX: </span><span style="color:#6F42C1;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;@/assets/images/tycho2t3_80_mx.jpg&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">                        positiveY: </span><span style="color:#6F42C1;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;@/assets/images/tycho2t3_80_py.jpg&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">                        negativeY: </span><span style="color:#6F42C1;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;@/assets/images/tycho2t3_80_my.jpg&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">                        positiveZ: </span><span style="color:#6F42C1;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;@/assets/images/tycho2t3_80_pz.jpg&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">                        negativeZ: </span><span style="color:#6F42C1;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;@/assets/images/tycho2t3_80_mz.jpg&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">                    }</span></span>
<span class="line"><span style="color:#24292E;">                })</span></span>
<span class="line"><span style="color:#24292E;">            });</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//开启地形深度检测</span></span>
<span class="line"><span style="color:#24292E;">            window.viewer.scene.globe.depthTestAgainstTerrain </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//加载3dtiles模型、定位</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> tileset </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> window.Cesium.</span><span style="color:#6F42C1;">Cesium3DTileset</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">                url: </span><span style="color:#032F62;">&quot;/model/Tileset/示例建筑/tileset.json&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            }).readyPromise</span></span>
<span class="line"><span style="color:#24292E;">            window.viewer.scene.primitives.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(tileset);</span></span>
<span class="line"><span style="color:#24292E;">            window.viewer.</span><span style="color:#6F42C1;">zoomTo</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                tileset,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> window.Cesium.</span><span style="color:#6F42C1;">HeadingPitchRange</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#005CC5;">0.0</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">0.5</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                    tileset.boundingSphere.radius </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2.0</span></span>
<span class="line"><span style="color:#24292E;">                )</span></span>
<span class="line"><span style="color:#24292E;">            );</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// this.adjustTilesetHeight(tileset,200)</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> height</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">setInterval</span><span style="color:#24292E;">(()</span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">adjustTilesetHeight</span><span style="color:#24292E;">(tileset,height</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            },</span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">adjustTilesetHeight</span><span style="color:#24292E;">(tileset, height </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//计算出模型包围球的中心点(弧度制)</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">cartographic</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.Cesium.Cartographic.</span><span style="color:#6F42C1;">fromCartesian</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                tileset.boundingSphere.center</span></span>
<span class="line"><span style="color:#24292E;">            );</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//计算与模型包围球中心点经纬度相同的地表点位</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">surface</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.Cesium.Cartesian3.</span><span style="color:#6F42C1;">fromRadians</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                cartographic.longitude,</span></span>
<span class="line"><span style="color:#24292E;">                cartographic.latitude,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">0.0</span></span>
<span class="line"><span style="color:#24292E;">            );</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//计算调整高度后的模型包围球的中心点</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">offset</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.Cesium.Cartesian3.</span><span style="color:#6F42C1;">fromRadians</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                cartographic.longitude,</span></span>
<span class="line"><span style="color:#24292E;">                cartographic.latitude,</span></span>
<span class="line"><span style="color:#24292E;">                height</span></span>
<span class="line"><span style="color:#24292E;">            );</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//计算差向量</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">translation</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.Cesium.Cartesian3.</span><span style="color:#6F42C1;">subtract</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                offset,</span></span>
<span class="line"><span style="color:#24292E;">                surface,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> window.Cesium.</span><span style="color:#6F42C1;">Cartesian3</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">            );</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//修改模型的变换矩阵</span></span>
<span class="line"><span style="color:#24292E;">            tileset.modelMatrix </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.Cesium.Matrix4.</span><span style="color:#6F42C1;">fromTranslation</span><span style="color:#24292E;">(translation);</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span></code></pre></div><h2 id="三、模型角度" tabindex="-1">三、模型角度 <a class="header-anchor" href="#三、模型角度" aria-label="Permalink to &quot;三、模型角度&quot;">​</a></h2><blockquote><p>相关类及属性：HeadingPitchRoll</p></blockquote><h4 id="headingpitchroll" tabindex="-1">HeadingPitchRoll <a class="header-anchor" href="#headingpitchroll" aria-label="Permalink to &quot;HeadingPitchRoll&quot;">​</a></h4><p>heading、pitch、roll</p><ul><li>heading 偏航角，绕Z轴，绕-Z轴旋转为正</li><li>pitch 俯仰角，绕Y轴，绕-Y旋转为正</li><li>roll 翻滚角，绕X（视线）轴，绕+X轴旋转为正</li></ul><p><img src="`+p+`" alt="image-20230519111655975"></p><h4 id="实例代码-1" tabindex="-1">实例代码 <a class="header-anchor" href="#实例代码-1" aria-label="Permalink to &quot;实例代码&quot;">​</a></h4><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;cesium-container&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;ThreeDModel&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    components: {},</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">mounted</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">initViewer</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">addModel</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/model/glb/XXX.glb&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4000</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    methods: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">addModel</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">url</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">height</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            window.viewer.entities.</span><span style="color:#B392F0;">removeAll</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">position</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.Cesium.Cartesian3.</span><span style="color:#B392F0;">fromDegrees</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">120.059</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">36.328</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                height</span></span>
<span class="line"><span style="color:#E1E4E8;">            );</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">heading</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.Cesium.Math.</span><span style="color:#B392F0;">toRadians</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">135</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">pitch</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">roll</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">hpr</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> window.Cesium.</span><span style="color:#B392F0;">HeadingPitchRoll</span><span style="color:#E1E4E8;">(heading, pitch, roll);</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">orientation</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.Cesium.Transforms.</span><span style="color:#B392F0;">headingPitchRollQuaternion</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">                position,</span></span>
<span class="line"><span style="color:#E1E4E8;">                hpr</span></span>
<span class="line"><span style="color:#E1E4E8;">            );</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">entity</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.viewer.entities.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">                name: url,</span></span>
<span class="line"><span style="color:#E1E4E8;">                position: position,</span></span>
<span class="line"><span style="color:#E1E4E8;">                orientation: orientation,</span></span>
<span class="line"><span style="color:#E1E4E8;">                model: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                    uri: url,</span></span>
<span class="line"><span style="color:#E1E4E8;">                    minimumPixelSize: </span><span style="color:#79B8FF;">128</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                    maximumScale: </span><span style="color:#79B8FF;">20000</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                    clippingPlanes: </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> window.Cesium.</span><span style="color:#B392F0;">ClippingPlaneCollection</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">                        planes: [</span></span>
<span class="line"><span style="color:#E1E4E8;">                            </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> window.Cesium.</span><span style="color:#B392F0;">ClippingPlane</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> window.Cesium.</span><span style="color:#B392F0;">Cartesian3</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">), </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">                        ],</span></span>
<span class="line"><span style="color:#E1E4E8;">                        edgeWidth: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                        edgeColor: window.Cesium.Color.</span><span style="color:#79B8FF;">RED</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                        enabled: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                        edgeMaterial: </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> window.Cesium.</span><span style="color:#B392F0;">PolylineOutlineMaterialProperty</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">                            color: window.Cesium.Color.</span><span style="color:#79B8FF;">RED</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                            outlineWidth: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                            outlineColor: window.Cesium.Color.</span><span style="color:#79B8FF;">BLACK</span></span>
<span class="line"><span style="color:#E1E4E8;">                        }),</span></span>
<span class="line"><span style="color:#E1E4E8;">                    })</span></span>
<span class="line"><span style="color:#E1E4E8;">                },</span></span>
<span class="line"><span style="color:#E1E4E8;">            });</span></span>
<span class="line"><span style="color:#E1E4E8;">            window.viewer.trackedEntity </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> entity;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;cesium-container&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&#39;ThreeDModel&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    components: {},</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">mounted</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">initViewer</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">addModel</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;/model/glb/XXX.glb&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4000</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    methods: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">addModel</span><span style="color:#24292E;">(</span><span style="color:#E36209;">url</span><span style="color:#24292E;">, </span><span style="color:#E36209;">height</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            window.viewer.entities.</span><span style="color:#6F42C1;">removeAll</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">position</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.Cesium.Cartesian3.</span><span style="color:#6F42C1;">fromDegrees</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">120.059</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">36.328</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                height</span></span>
<span class="line"><span style="color:#24292E;">            );</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">heading</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.Cesium.Math.</span><span style="color:#6F42C1;">toRadians</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">135</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">pitch</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">roll</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">hpr</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> window.Cesium.</span><span style="color:#6F42C1;">HeadingPitchRoll</span><span style="color:#24292E;">(heading, pitch, roll);</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">orientation</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.Cesium.Transforms.</span><span style="color:#6F42C1;">headingPitchRollQuaternion</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                position,</span></span>
<span class="line"><span style="color:#24292E;">                hpr</span></span>
<span class="line"><span style="color:#24292E;">            );</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">entity</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.viewer.entities.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">                name: url,</span></span>
<span class="line"><span style="color:#24292E;">                position: position,</span></span>
<span class="line"><span style="color:#24292E;">                orientation: orientation,</span></span>
<span class="line"><span style="color:#24292E;">                model: {</span></span>
<span class="line"><span style="color:#24292E;">                    uri: url,</span></span>
<span class="line"><span style="color:#24292E;">                    minimumPixelSize: </span><span style="color:#005CC5;">128</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                    maximumScale: </span><span style="color:#005CC5;">20000</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                    clippingPlanes: </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> window.Cesium.</span><span style="color:#6F42C1;">ClippingPlaneCollection</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">                        planes: [</span></span>
<span class="line"><span style="color:#24292E;">                            </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> window.Cesium.</span><span style="color:#6F42C1;">ClippingPlane</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> window.Cesium.</span><span style="color:#6F42C1;">Cartesian3</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">), </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">                        ],</span></span>
<span class="line"><span style="color:#24292E;">                        edgeWidth: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                        edgeColor: window.Cesium.Color.</span><span style="color:#005CC5;">RED</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                        enabled: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                        edgeMaterial: </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> window.Cesium.</span><span style="color:#6F42C1;">PolylineOutlineMaterialProperty</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">                            color: window.Cesium.Color.</span><span style="color:#005CC5;">RED</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                            outlineWidth: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                            outlineColor: window.Cesium.Color.</span><span style="color:#005CC5;">BLACK</span></span>
<span class="line"><span style="color:#24292E;">                        }),</span></span>
<span class="line"><span style="color:#24292E;">                    })</span></span>
<span class="line"><span style="color:#24292E;">                },</span></span>
<span class="line"><span style="color:#24292E;">            });</span></span>
<span class="line"><span style="color:#24292E;">            window.viewer.trackedEntity </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> entity;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><h2 id="四、模型着色" tabindex="-1">四、模型着色 <a class="header-anchor" href="#四、模型着色" aria-label="Permalink to &quot;四、模型着色&quot;">​</a></h2><blockquote><p>相关类及属性：ModelGraphics</p></blockquote><h4 id="modelgraphics-options" tabindex="-1">ModelGraphics(options) <a class="header-anchor" href="#modelgraphics-options" aria-label="Permalink to &quot;ModelGraphics(options)&quot;">​</a></h4><table><thead><tr><th><code>silhouetteColor</code></th><th><a href="https://www.vvpstk.com/public/Cesium/Documentation/Property.html" target="_blank" rel="noreferrer">Property</a></th><th><code>Color.RED</code></th><th>optional指定的模型边框颜色 <a href="https://www.vvpstk.com/public/Cesium/Documentation/Color.html" target="_blank" rel="noreferrer"><code>Color</code></a></th></tr></thead><tbody><tr><td><code>silhouetteSize</code></td><td><a href="https://www.vvpstk.com/public/Cesium/Documentation/Property.html" target="_blank" rel="noreferrer">Property</a></td><td><code>0.0</code></td><td>optional边框大小（像素）。</td></tr><tr><td><code>color</code></td><td><a href="https://www.vvpstk.com/public/Cesium/Documentation/Property.html" target="_blank" rel="noreferrer">Property</a></td><td><code>Color.WHITE</code></td><td>optional指定Color<a href="https://www.vvpstk.com/public/Cesium/Documentation/Color.html" target="_blank" rel="noreferrer"><code>Color</code></a>与模型的渲染颜色混合的属性 <a href="https://www.vvpstk.com/public/Cesium/Documentation/Color.html" target="_blank" rel="noreferrer"><code>Color</code></a></td></tr><tr><td><code>colorBlendMode</code></td><td><a href="https://www.vvpstk.com/public/Cesium/Documentation/Property.html" target="_blank" rel="noreferrer">Property</a></td><td><code>ColorBlendMode.HIGHLIGHT</code></td><td>optional一个枚举属性，指定颜色混合模式。</td></tr><tr><td><code>colorBlendAmount</code></td><td><a href="https://www.vvpstk.com/public/Cesium/Documentation/Property.html" target="_blank" rel="noreferrer">Property</a></td><td><code>0.5</code></td><td>optional混合模式的强度值。当colorBlendMode为Cesium.ColorBlendMode.MIX时有效，范围0-1，0表示不和颜色混合，1则表示替换。</td></tr><tr><td><code>imageBasedLightingFactor</code></td><td><a href="https://www.vvpstk.com/public/Cesium/Documentation/Property.html" target="_blank" rel="noreferrer">Property</a></td><td><code>new Cartesian2(1.0, 1.0)</code></td><td>optional指定基于漫反射和镜面反射图像的照明的属性.</td></tr><tr><td><code>lightColor</code></td><td><a href="https://www.vvpstk.com/public/Cesium/Documentation/Property.html" target="_blank" rel="noreferrer">Property</a></td><td></td><td>optional指定光源颜色。默认为 <code>undefined</code>。</td></tr></tbody></table><h4 id="实例代码-2" tabindex="-1">实例代码 <a class="header-anchor" href="#实例代码-2" aria-label="Permalink to &quot;实例代码&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">entity</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.viewer.entities.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">                name: url,</span></span>
<span class="line"><span style="color:#E1E4E8;">                position: position,</span></span>
<span class="line"><span style="color:#E1E4E8;">                orientation: orientation,</span></span>
<span class="line"><span style="color:#E1E4E8;">                model: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                    uri: url,</span></span>
<span class="line"><span style="color:#E1E4E8;">                    minimumPixelSize: </span><span style="color:#79B8FF;">128</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                    maximumScale: </span><span style="color:#79B8FF;">20000</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                    color:window.Cesium.Color.</span><span style="color:#B392F0;">fromCssColorString</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;#FF6C37&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">withAlpha</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">                    colorBlendMode:window.Cesium.ColorBlendMode.</span><span style="color:#79B8FF;">REPLACE</span><span style="color:#E1E4E8;">,</span><span style="color:#6A737D;">//HIGHLIGHT、MIX、REPLACE</span></span>
<span class="line"><span style="color:#E1E4E8;">                    colorBlendAmount:</span><span style="color:#79B8FF;">0.8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                    silhouetteColor:window.Cesium.Color.</span><span style="color:#B392F0;">fromCssColorString</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;#FF0000&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">withAlpha</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">                    silhouetteSize:</span><span style="color:#79B8FF;">10</span></span>
<span class="line"><span style="color:#E1E4E8;">                },</span></span>
<span class="line"><span style="color:#E1E4E8;">            });</span></span>
<span class="line"><span style="color:#E1E4E8;">            window.viewer.trackedEntity </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> entity;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">entity</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.viewer.entities.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">                name: url,</span></span>
<span class="line"><span style="color:#24292E;">                position: position,</span></span>
<span class="line"><span style="color:#24292E;">                orientation: orientation,</span></span>
<span class="line"><span style="color:#24292E;">                model: {</span></span>
<span class="line"><span style="color:#24292E;">                    uri: url,</span></span>
<span class="line"><span style="color:#24292E;">                    minimumPixelSize: </span><span style="color:#005CC5;">128</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                    maximumScale: </span><span style="color:#005CC5;">20000</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                    color:window.Cesium.Color.</span><span style="color:#6F42C1;">fromCssColorString</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;#FF6C37&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">withAlpha</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">                    colorBlendMode:window.Cesium.ColorBlendMode.</span><span style="color:#005CC5;">REPLACE</span><span style="color:#24292E;">,</span><span style="color:#6A737D;">//HIGHLIGHT、MIX、REPLACE</span></span>
<span class="line"><span style="color:#24292E;">                    colorBlendAmount:</span><span style="color:#005CC5;">0.8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                    silhouetteColor:window.Cesium.Color.</span><span style="color:#6F42C1;">fromCssColorString</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;#FF0000&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">withAlpha</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">                    silhouetteSize:</span><span style="color:#005CC5;">10</span></span>
<span class="line"><span style="color:#24292E;">                },</span></span>
<span class="line"><span style="color:#24292E;">            });</span></span>
<span class="line"><span style="color:#24292E;">            window.viewer.trackedEntity </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> entity;</span></span></code></pre></div><h2 id="五、模型获取" tabindex="-1">五、模型获取 <a class="header-anchor" href="#五、模型获取" aria-label="Permalink to &quot;五、模型获取&quot;">​</a></h2><blockquote><p>相关类及属性：ScreenSpaceEventHandler、ScreenSpaceEventType、Cesium3DTileset、Cesium3DTile、Cesium3DTileFeature</p></blockquote><h4 id="screenspaceeventhandler" tabindex="-1">ScreenSpaceEventHandler <a class="header-anchor" href="#screenspaceeventhandler" aria-label="Permalink to &quot;ScreenSpaceEventHandler&quot;">​</a></h4><p>处理用户输入事件。可以添加自定义函数，以便在用户输入时执行。</p><h4 id="screenspaceeventtype" tabindex="-1">ScreenSpaceEventType <a class="header-anchor" href="#screenspaceeventtype" aria-label="Permalink to &quot;ScreenSpaceEventType&quot;">​</a></h4><p>屏幕点击事件类型</p><h4 id="cesium3dtileset-1" tabindex="-1">Cesium3DTileset <a class="header-anchor" href="#cesium3dtileset-1" aria-label="Permalink to &quot;Cesium3DTileset&quot;">​</a></h4><p>是一个最高级别的类，表示一个3D Tile数据集。Cesium3DTileset实例可以通过Cesium的Tileset类创建，并且可以通过url或json数据加载3D Tile数据。Cesium3DTileset负责管理整个3D Tile数据集，并对其中的每个3D Tile进行加载、解析和渲染</p><h4 id="cesium3dtile" tabindex="-1">Cesium3DTile <a class="header-anchor" href="#cesium3dtile" aria-label="Permalink to &quot;Cesium3DTile&quot;">​</a></h4><p>Cesium3DTile是Cesium3DTileset中的一个单独的3D Tile对象，它表示一个具有几何体和纹理的3D模型。Cesium3DTile对象可以包含多个几何体，每个几何体又包含多个几何属性（如位置、法线、纹理坐标等）。Cesium3DTile对象负责管理自身的几何体和纹理，并且可以通过Cesium3DTileset的方法进行加载、卸载和渲染。</p><h4 id="cesium3dtilefeature" tabindex="-1">Cesium3DTileFeature <a class="header-anchor" href="#cesium3dtilefeature" aria-label="Permalink to &quot;Cesium3DTileFeature&quot;">​</a></h4><p>Cesium3DTileFeature是Cesium3DTile中的一个要素对象，表示一个3D Tile中的一个具体对象（如建筑、树木、汽⻋等）。Cesium3DTileFeature对象可以包含多个属性和几何信息，可以通Cesium3DTile的方法进行查询和渲染。</p><h4 id="实例代码-3" tabindex="-1">实例代码 <a class="header-anchor" href="#实例代码-3" aria-label="Permalink to &quot;实例代码&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">handler</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> window.Cesium.</span><span style="color:#B392F0;">ScreenSpaceEventHandler</span><span style="color:#E1E4E8;">(window.viewer.scene.canvas);</span></span>
<span class="line"><span style="color:#E1E4E8;">            handler.</span><span style="color:#B392F0;">setInputAction</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">movement</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;">//将上次选中的要素的颜色重置</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (selectedFeature) {</span></span>
<span class="line"><span style="color:#E1E4E8;">                    selectedFeature.color </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.Cesium.Color.</span><span style="color:#79B8FF;">WHITE</span></span>
<span class="line"><span style="color:#E1E4E8;">                }</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;">//拾取要素</span></span>
<span class="line"><span style="color:#E1E4E8;">                selectedFeature </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.viewer.scene.</span><span style="color:#B392F0;">pick</span><span style="color:#E1E4E8;">(movement.position);</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">selectedFeature) </span><span style="color:#F97583;">return</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> obj </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {}</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;">//获取要素属性信息</span></span>
<span class="line"><span style="color:#E1E4E8;">                selectedFeature.</span><span style="color:#B392F0;">getPropertyIds</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">                    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;打印下id&quot;</span><span style="color:#E1E4E8;">,id)</span></span>
<span class="line"><span style="color:#E1E4E8;">                    obj[id] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> selectedFeature.</span><span style="color:#B392F0;">getProperty</span><span style="color:#E1E4E8;">(id)</span></span>
<span class="line"><span style="color:#E1E4E8;">                });</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;">//设置要素颜色</span></span>
<span class="line"><span style="color:#E1E4E8;">                selectedFeature.color </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.Cesium.Color.</span><span style="color:#79B8FF;">AQUA</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">setTimeout</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#B392F0;">alert</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(obj))</span></span>
<span class="line"><span style="color:#E1E4E8;">                }, </span><span style="color:#79B8FF;">500</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            }, window.Cesium.ScreenSpaceEventType.</span><span style="color:#79B8FF;">LEFT_CLICK</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">handler</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> window.Cesium.</span><span style="color:#6F42C1;">ScreenSpaceEventHandler</span><span style="color:#24292E;">(window.viewer.scene.canvas);</span></span>
<span class="line"><span style="color:#24292E;">            handler.</span><span style="color:#6F42C1;">setInputAction</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">movement</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6A737D;">//将上次选中的要素的颜色重置</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (selectedFeature) {</span></span>
<span class="line"><span style="color:#24292E;">                    selectedFeature.color </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.Cesium.Color.</span><span style="color:#005CC5;">WHITE</span></span>
<span class="line"><span style="color:#24292E;">                }</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6A737D;">//拾取要素</span></span>
<span class="line"><span style="color:#24292E;">                selectedFeature </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.viewer.scene.</span><span style="color:#6F42C1;">pick</span><span style="color:#24292E;">(movement.position);</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">!</span><span style="color:#24292E;">selectedFeature) </span><span style="color:#D73A49;">return</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> obj </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {}</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6A737D;">//获取要素属性信息</span></span>
<span class="line"><span style="color:#24292E;">                selectedFeature.</span><span style="color:#6F42C1;">getPropertyIds</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">forEach</span><span style="color:#24292E;">(</span><span style="color:#E36209;">id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">                    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;打印下id&quot;</span><span style="color:#24292E;">,id)</span></span>
<span class="line"><span style="color:#24292E;">                    obj[id] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> selectedFeature.</span><span style="color:#6F42C1;">getProperty</span><span style="color:#24292E;">(id)</span></span>
<span class="line"><span style="color:#24292E;">                });</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6A737D;">//设置要素颜色</span></span>
<span class="line"><span style="color:#24292E;">                selectedFeature.color </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.Cesium.Color.</span><span style="color:#005CC5;">AQUA</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">setTimeout</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6F42C1;">alert</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(obj))</span></span>
<span class="line"><span style="color:#24292E;">                }, </span><span style="color:#005CC5;">500</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            }, window.Cesium.ScreenSpaceEventType.</span><span style="color:#005CC5;">LEFT_CLICK</span><span style="color:#24292E;">);</span></span></code></pre></div><h2 id="六、模型裁剪平面" tabindex="-1">六、模型裁剪平面 <a class="header-anchor" href="#六、模型裁剪平面" aria-label="Permalink to &quot;六、模型裁剪平面&quot;">​</a></h2><blockquote><p>相关类及属性：ClippingPlaneCollection、ClippingPlane、CallbackProperty</p></blockquote><h4 id="clippingplanecollection" tabindex="-1">ClippingPlaneCollection <a class="header-anchor" href="#clippingplanecollection" aria-label="Permalink to &quot;ClippingPlaneCollection&quot;">​</a></h4><h4 id="clippingplane" tabindex="-1">ClippingPlane <a class="header-anchor" href="#clippingplane" aria-label="Permalink to &quot;ClippingPlane&quot;">​</a></h4><h4 id="callbackproperty" tabindex="-1">CallbackProperty <a class="header-anchor" href="#callbackproperty" aria-label="Permalink to &quot;CallbackProperty&quot;">​</a></h4><h2 id="七、模型剖切" tabindex="-1">七、模型剖切 <a class="header-anchor" href="#七、模型剖切" aria-label="Permalink to &quot;七、模型剖切&quot;">​</a></h2><p>Cesium.ClippingPlaneCollection 用于模型的剖切，剖切面的颜色、粗细、材质、位置</p>`,52),t=[e];function c(r,E,i,y,d,C){return n(),a("div",null,t)}const h=s(o,[["render",c]]);export{F as __pageData,h as default};
