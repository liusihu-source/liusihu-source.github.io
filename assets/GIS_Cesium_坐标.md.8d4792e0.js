import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.a7175731.js";const p="/assets/1666850225105.7c0ca018.png",o="data:image/png;base64,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",e="/assets/1666603773023.98e54ec5.png",h=JSON.parse('{"title":"Cesium1.98 坐标系 --笔记","description":"","frontmatter":{},"headers":[],"relativePath":"GIS/Cesium/坐标.md","filePath":"GIS/Cesium/坐标.md","lastUpdated":null}'),t={name:"GIS/Cesium/坐标.md"},c=l('<h1 id="cesium1-98-坐标系-笔记" tabindex="-1">Cesium1.98 坐标系 --笔记 <a class="header-anchor" href="#cesium1-98-坐标系-笔记" aria-label="Permalink to &quot;Cesium1.98 坐标系 --笔记&quot;">​</a></h1><h2 id="一、前提知识-角度经纬度、度分秒经纬度、弧度经纬度" tabindex="-1">一、前提知识（角度经纬度、度分秒经纬度、弧度经纬度） <a class="header-anchor" href="#一、前提知识-角度经纬度、度分秒经纬度、弧度经纬度" aria-label="Permalink to &quot;一、前提知识（角度经纬度、度分秒经纬度、弧度经纬度）&quot;">​</a></h2><h3 id="_1、角度经纬度" tabindex="-1">1、角度经纬度 <a class="header-anchor" href="#_1、角度经纬度" aria-label="Permalink to &quot;1、角度经纬度&quot;">​</a></h3><ul><li><p><strong>Cesuim中没有具体的经纬度对象，要得到经纬度首先需要计算为弧度，再进行转换</strong></p></li><li><p>下图中以本初子午线作为x和z的面，建立了一个空间坐标系。可知在纬度方向上，角1的范围为-90~90，即南纬90°~北纬90°，角2的范围是-180~180，即东经180°~西经180° ， <code>如 39.905556 116.424722</code></p></li></ul><p><img src="'+p+`" alt="1666850225105"></p><h3 id="_2、弧度经纬度" tabindex="-1">2、弧度经纬度 <a class="header-anchor" href="#_2、弧度经纬度" aria-label="Permalink to &quot;2、弧度经纬度&quot;">​</a></h3><ul><li><strong>Cesium中的地理坐标单位默认是弧度制，用Cartographic变量表示</strong></li><li>弧度：<code>弧的长度除以弧的半径得出的比值。如π对应180°</code>，如<code>0.6964833420389782 2.0319947296190777</code><ul><li><strong>角度转弧度 π/180×角度</strong></li><li><strong>弧度变角度 180/π×弧度</strong></li></ul></li></ul><h3 id="_3、度分秒经纬度" tabindex="-1">3、度分秒经纬度 <a class="header-anchor" href="#_3、度分秒经纬度" aria-label="Permalink to &quot;3、度分秒经纬度&quot;">​</a></h3><ul><li>ArcMap地理配准常见的度分秒经纬度：北纬39°54′20″，东经116°25′29″</li><li>如有需要，可通过以下方式<strong>角度经纬度 《=》 度分秒经纬度</strong>得到<code>度分秒经纬度</code></li></ul><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//度分秒 =&gt; 角度经纬度</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">changeDu</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">du</span><span style="color:#E1E4E8;">,</span><span style="color:#FFAB70;">fen</span><span style="color:#E1E4E8;">,</span><span style="color:#FFAB70;">miao</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> mFen </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(miao </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> miao </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">		mFen </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Number</span><span style="color:#E1E4E8;">(miao </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">	}</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> fDu </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(fen </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> fen </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;"> ){</span></span>
<span class="line"><span style="color:#E1E4E8;">		fDu </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">Number</span><span style="color:#E1E4E8;">(fen) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> mFen) </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">	}</span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">		fDu </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> mFen;</span></span>
<span class="line"><span style="color:#E1E4E8;">	}</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> lDu </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(du </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> du </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">		lDu </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">Number</span><span style="color:#E1E4E8;">(du)</span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;">fDu).</span><span style="color:#B392F0;">toFixed</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">	}</span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">		lDu </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> fDu.</span><span style="color:#B392F0;">toFixed</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">	}</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> lDu;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//角度经纬度 =&gt; 度分秒</span></span>
<span class="line"><span style="color:#6A737D;">//将度转换成为度分秒</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">formatDegree</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">value</span><span style="color:#E1E4E8;">) {  </span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(value </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> value </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#6A737D;">///&lt;summary&gt;将度转换成为度分秒&lt;/summary&gt;  </span></span>
<span class="line"><span style="color:#E1E4E8;">	    value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Math.</span><span style="color:#B392F0;">abs</span><span style="color:#E1E4E8;">(value);  </span><span style="color:#6A737D;">//返回数的绝对值</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> v1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Math.</span><span style="color:#B392F0;">floor</span><span style="color:#E1E4E8;">(value);</span><span style="color:#6A737D;">//度   //对数进行下舍入</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> v2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Math.</span><span style="color:#B392F0;">floor</span><span style="color:#E1E4E8;">((value </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> v1) </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;">//分  </span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> v3 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Math.</span><span style="color:#B392F0;">round</span><span style="color:#E1E4E8;">((value </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> v1) </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3600</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">%</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;">//秒  //把数四舍五入为最接近的整数</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> v1 </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> v2 </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> v3 </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;;&#39;</span><span style="color:#E1E4E8;">;  </span></span>
<span class="line"><span style="color:#E1E4E8;">	}</span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;;&#39;</span><span style="color:#E1E4E8;">;  </span></span>
<span class="line"><span style="color:#E1E4E8;">	}</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//度分秒 =&gt; 角度经纬度</span></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">changeDu</span><span style="color:#24292E;">(</span><span style="color:#E36209;">du</span><span style="color:#24292E;">,</span><span style="color:#E36209;">fen</span><span style="color:#24292E;">,</span><span style="color:#E36209;">miao</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> mFen </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(miao </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> miao </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">		mFen </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Number</span><span style="color:#24292E;">(miao </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">60</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">	}</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> fDu </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(fen </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> fen </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;"> ){</span></span>
<span class="line"><span style="color:#24292E;">		fDu </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">Number</span><span style="color:#24292E;">(fen) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> mFen) </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">60</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">	}</span><span style="color:#D73A49;">else</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">		fDu </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> mFen;</span></span>
<span class="line"><span style="color:#24292E;">	}</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> lDu </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(du </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> du </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">		lDu </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">Number</span><span style="color:#24292E;">(du)</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">fDu).</span><span style="color:#6F42C1;">toFixed</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">6</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">	}</span><span style="color:#D73A49;">else</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">		lDu </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fDu.</span><span style="color:#6F42C1;">toFixed</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">6</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">	}</span></span>
<span class="line"><span style="color:#24292E;">	</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> lDu;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//角度经纬度 =&gt; 度分秒</span></span>
<span class="line"><span style="color:#6A737D;">//将度转换成为度分秒</span></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">formatDegree</span><span style="color:#24292E;">(</span><span style="color:#E36209;">value</span><span style="color:#24292E;">) {  </span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(value </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> value </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#6A737D;">///&lt;summary&gt;将度转换成为度分秒&lt;/summary&gt;  </span></span>
<span class="line"><span style="color:#24292E;">	    value </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Math.</span><span style="color:#6F42C1;">abs</span><span style="color:#24292E;">(value);  </span><span style="color:#6A737D;">//返回数的绝对值</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> v1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Math.</span><span style="color:#6F42C1;">floor</span><span style="color:#24292E;">(value);</span><span style="color:#6A737D;">//度   //对数进行下舍入</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> v2 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Math.</span><span style="color:#6F42C1;">floor</span><span style="color:#24292E;">((value </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> v1) </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">60</span><span style="color:#24292E;">);</span><span style="color:#6A737D;">//分  </span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> v3 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Math.</span><span style="color:#6F42C1;">round</span><span style="color:#24292E;">((value </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> v1) </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3600</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">%</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">60</span><span style="color:#24292E;">);</span><span style="color:#6A737D;">//秒  //把数四舍五入为最接近的整数</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> v1 </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;;&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> v2 </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;;&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> v3 </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;;&#39;</span><span style="color:#24292E;">;  </span></span>
<span class="line"><span style="color:#24292E;">	}</span><span style="color:#D73A49;">else</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;;&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;;&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;;&#39;</span><span style="color:#24292E;">;  </span></span>
<span class="line"><span style="color:#24292E;">	}</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div><h2 id="二、cartesian2-kɑːˈtiːziən-屏幕坐标" tabindex="-1">二、Cartesian2 [kɑːˈtiːziən]屏幕坐标 <a class="header-anchor" href="#二、cartesian2-kɑːˈtiːziən-屏幕坐标" aria-label="Permalink to &quot;二、Cartesian2 [kɑːˈtiːziən]屏幕坐标&quot;">​</a></h2><ul><li><p><strong>Cesium使用Cartesian2描述屏幕坐标系</strong></p></li><li><p>构造函数</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> Cesium.Cartesian2（x, y）</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.Cartesian2（x, y）</span></span></code></pre></div></li><li><p>说明</p><p>鼠标点击位置距离canvas左上角的像素值。屏幕左上角为原点（0.0），屏幕水平方向为X轴，向右为正，垂直方向为Y轴，向下为正，如图所示。</p></li></ul><p><img src="`+o+`" alt="1666603262309"></p><h2 id="三、cartesian3世界笛卡尔空间直角坐标系" tabindex="-1">三、Cartesian3世界笛卡尔空间直角坐标系 <a class="header-anchor" href="#三、cartesian3世界笛卡尔空间直角坐标系" aria-label="Permalink to &quot;三、Cartesian3世界笛卡尔空间直角坐标系&quot;">​</a></h2><ul><li><p><strong>Cesium使用Cartesian3描述世界坐标系</strong></p></li><li><p>构造函数</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//通过角度经纬度</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> cartesian3 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Cesium.Cartesian3.</span><span style="color:#B392F0;">fromDegrees</span><span style="color:#E1E4E8;">( </span><span style="color:#79B8FF;">121.80348</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">29.8171504923588</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">2500</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//通过弧度经纬度</span></span>
<span class="line"><span style="color:#E1E4E8;">Cesium.Cartesian3.</span><span style="color:#B392F0;">fromRadians</span><span style="color:#E1E4E8;">(longitude,latitude,height,ellipsoid,result)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//通过其他方式</span></span>
<span class="line"><span style="color:#E1E4E8;">Cesium.Cartographic.</span><span style="color:#B392F0;">toCartesian</span><span style="color:#E1E4E8;">(cartographic, ellipsoid, result)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//通过角度经纬度</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> cartesian3 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Cesium.Cartesian3.</span><span style="color:#6F42C1;">fromDegrees</span><span style="color:#24292E;">( </span><span style="color:#005CC5;">121.80348</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">29.8171504923588</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2500</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//通过弧度经纬度</span></span>
<span class="line"><span style="color:#24292E;">Cesium.Cartesian3.</span><span style="color:#6F42C1;">fromRadians</span><span style="color:#24292E;">(longitude,latitude,height,ellipsoid,result)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//通过其他方式</span></span>
<span class="line"><span style="color:#24292E;">Cesium.Cartographic.</span><span style="color:#6F42C1;">toCartesian</span><span style="color:#24292E;">(cartographic, ellipsoid, result)</span></span></code></pre></div></li><li><p>说明</p><ul><li>以空间中O点为原点，建立三条两两垂直的数轴；X轴(横坐标)、Y轴(纵坐标)、Z轴(竖坐标)，建立了空间直角坐标系0—XYZ</li><li>笛卡儿空间直角坐标的原点就是椭球的中心，在计算机上进行绘图时，不方便使用经纬度直接进行绘图，一般会将坐标系转换为<code>笛卡儿坐标系，使用计算机图形学中的知识进行绘图</code>。 <ul><li><code>Cesium.Matrix3</code>（3x3矩阵，用于描述旋转变换）</li><li><code>Cesium.Matrix4</code>（4x4矩阵，用于描述旋转加平移变换）</li><li><code>Cesium.Quaternion</code>（四元数，用于描述围绕某个向量旋转一定角度的变换）</li><li><code>Cesium.Transforms</code> (包含将位置转换为各种参考系的功能)</li></ul></li></ul></li></ul><p><img src="`+e+`" alt="1666603773023"></p><h2 id="四、坐标转换" tabindex="-1">四、坐标转换 <a class="header-anchor" href="#四、坐标转换" aria-label="Permalink to &quot;四、坐标转换&quot;">​</a></h2><h3 id="_1-cartesian2-《-》-cartesian3" tabindex="-1">1.Cartesian2 《=》 Cartesian3 <a class="header-anchor" href="#_1-cartesian2-《-》-cartesian3" aria-label="Permalink to &quot;1.Cartesian2 《=》 Cartesian3&quot;">​</a></h3><blockquote><p>注意这里屏幕坐标一定要在球上，否则生成出的cartesian对象是<code>undefined</code></p></blockquote><h4 id="屏幕坐标-世界坐标" tabindex="-1">屏幕坐标 =&gt; 世界坐标 <a class="header-anchor" href="#屏幕坐标-世界坐标" aria-label="Permalink to &quot;屏幕坐标 =&gt; 世界坐标&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> pick1</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> Cesium.</span><span style="color:#B392F0;">Cartesian2</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> cartesian </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> viewer.scene.globe.</span><span style="color:#B392F0;">pick</span><span style="color:#E1E4E8;">(viewer.camera.</span><span style="color:#B392F0;">getPickRay</span><span style="color:#E1E4E8;">(pick1),viewer.scene);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> pick1</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">Cartesian2</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> cartesian </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> viewer.scene.globe.</span><span style="color:#6F42C1;">pick</span><span style="color:#24292E;">(viewer.camera.</span><span style="color:#6F42C1;">getPickRay</span><span style="color:#24292E;">(pick1),viewer.scene);</span></span></code></pre></div><h4 id="世界坐标-屏幕坐标" tabindex="-1">世界坐标 =&gt; 屏幕坐标 <a class="header-anchor" href="#世界坐标-屏幕坐标" aria-label="Permalink to &quot;世界坐标 =&gt; 屏幕坐标&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> cartesian3</span><span style="color:#F97583;">=new</span><span style="color:#E1E4E8;"> Cesium.</span><span style="color:#B392F0;">cartesian3</span><span style="color:#E1E4E8;">(x,y,z);</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> pick </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Cesium.SceneTransforms.</span><span style="color:#B392F0;">wgs84ToWindowCoordinates</span><span style="color:#E1E4E8;">(scene, Cartesian3);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> cartesian3</span><span style="color:#D73A49;">=new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">cartesian3</span><span style="color:#24292E;">(x,y,z);</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> pick </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Cesium.SceneTransforms.</span><span style="color:#6F42C1;">wgs84ToWindowCoordinates</span><span style="color:#24292E;">(scene, Cartesian3);</span></span></code></pre></div><h3 id="_2-cartesian3《-》-角度经纬度-《-》-弧度经纬度" tabindex="-1">2.Cartesian3《=》 角度经纬度 《=》 弧度经纬度 <a class="header-anchor" href="#_2-cartesian3《-》-角度经纬度-《-》-弧度经纬度" aria-label="Permalink to &quot;2.Cartesian3《=》 角度经纬度 《=》 弧度经纬度&quot;">​</a></h3><h4 id="角度经纬度-世界坐标系-直接" tabindex="-1">角度经纬度 =&gt; 世界坐标系（直接） <a class="header-anchor" href="#角度经纬度-世界坐标系-直接" aria-label="Permalink to &quot;角度经纬度 =&gt; 世界坐标系（直接）&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//方法一，直接转换</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> cartesian3 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Cesium.Cartesian3.</span><span style="color:#B392F0;">fromDegrees</span><span style="color:#E1E4E8;">(longitude, latitude, height) </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//方法二，先转为地理弧度，再转为世界坐标系</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> cartographic </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Cesium.Cartographic.</span><span style="color:#B392F0;">fromDegrees</span><span style="color:#E1E4E8;">(lon, lat, height); </span><span style="color:#6A737D;">//单位：度，度，米</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> cartesian3 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ellipsoid.</span><span style="color:#B392F0;">cartographicToCartesian</span><span style="color:#E1E4E8;">(cartographic);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//方法一，直接转换</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> cartesian3 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Cesium.Cartesian3.</span><span style="color:#6F42C1;">fromDegrees</span><span style="color:#24292E;">(longitude, latitude, height) </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//方法二，先转为地理弧度，再转为世界坐标系</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> cartographic </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Cesium.Cartographic.</span><span style="color:#6F42C1;">fromDegrees</span><span style="color:#24292E;">(lon, lat, height); </span><span style="color:#6A737D;">//单位：度，度，米</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> cartesian3 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ellipsoid.</span><span style="color:#6F42C1;">cartographicToCartesian</span><span style="color:#24292E;">(cartographic);</span></span></code></pre></div><h4 id="世界坐标系-角度经纬度" tabindex="-1">世界坐标系 =&gt; 角度经纬度 <a class="header-anchor" href="#世界坐标系-角度经纬度" aria-label="Permalink to &quot;世界坐标系 =&gt; 角度经纬度&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ellipsoid</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">viewer.scene.globe.ellipsoid;  </span><span style="color:#6A737D;">//首先获取场景中参考椭球体，因此表明可以更换椭球体</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">cartesian3</span><span style="color:#F97583;">=new</span><span style="color:#E1E4E8;"> Cesium.</span><span style="color:#B392F0;">cartesian3</span><span style="color:#E1E4E8;">(x,y,z);   </span><span style="color:#6A737D;">//创建一个初始的世界坐标系位置</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">cartographic</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">ellipsoid.</span><span style="color:#B392F0;">cartesianToCartographic</span><span style="color:#E1E4E8;">(cartesian3);  </span><span style="color:#6A737D;">//世界坐标系转为弧度经纬度</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> lat</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">Cesium.Math.</span><span style="color:#B392F0;">toDegrees</span><span style="color:#E1E4E8;">(cartograhphic.latitude);  </span><span style="color:#6A737D;">//弧度转为纬度</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> lon</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">Cesium.Math.</span><span style="color:#B392F0;">toDegrees</span><span style="color:#E1E4E8;">(cartograhpinc.longitude);  </span><span style="color:#6A737D;">//弧度转为经度</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> height</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">cartographic.height;  </span><span style="color:#6A737D;">//弧度转为高度</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ellipsoid</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">viewer.scene.globe.ellipsoid;  </span><span style="color:#6A737D;">//首先获取场景中参考椭球体，因此表明可以更换椭球体</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">cartesian3</span><span style="color:#D73A49;">=new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">cartesian3</span><span style="color:#24292E;">(x,y,z);   </span><span style="color:#6A737D;">//创建一个初始的世界坐标系位置</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">cartographic</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">ellipsoid.</span><span style="color:#6F42C1;">cartesianToCartographic</span><span style="color:#24292E;">(cartesian3);  </span><span style="color:#6A737D;">//世界坐标系转为弧度经纬度</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> lat</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">Cesium.Math.</span><span style="color:#6F42C1;">toDegrees</span><span style="color:#24292E;">(cartograhphic.latitude);  </span><span style="color:#6A737D;">//弧度转为纬度</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> lon</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">Cesium.Math.</span><span style="color:#6F42C1;">toDegrees</span><span style="color:#24292E;">(cartograhpinc.longitude);  </span><span style="color:#6A737D;">//弧度转为经度</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> height</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">cartographic.height;  </span><span style="color:#6A737D;">//弧度转为高度</span></span></code></pre></div><h4 id="弧度经纬度-世界坐标系-直接" tabindex="-1">弧度经纬度 =&gt; 世界坐标系（直接） <a class="header-anchor" href="#弧度经纬度-世界坐标系-直接" aria-label="Permalink to &quot;弧度经纬度 =&gt; 世界坐标系（直接）&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> cartesian3 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Cesium.Cartesian3.</span><span style="color:#B392F0;">fromRadians</span><span style="color:#E1E4E8;">(cartographic)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> cartesian3 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Cesium.Cartesian3.</span><span style="color:#6F42C1;">fromRadians</span><span style="color:#24292E;">(cartographic)</span></span></code></pre></div><h4 id="世界坐标系-弧度经纬度-直接" tabindex="-1">世界坐标系 =&gt; 弧度经纬度（直接） <a class="header-anchor" href="#世界坐标系-弧度经纬度-直接" aria-label="Permalink to &quot;世界坐标系 =&gt; 弧度经纬度（直接）&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//方法一</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> cartographic </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Cesium.Cartographic.</span><span style="color:#B392F0;">fromCartesian</span><span style="color:#E1E4E8;">(cartesian3)</span></span>
<span class="line"><span style="color:#6A737D;">//方法二: 首先需要获取到当下场景中的ellipsoid对象</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> cartographic </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ellipsoid.</span><span style="color:#B392F0;">cartesianToCartographic</span><span style="color:#E1E4E8;">(cartesian3)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//方法一</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> cartographic </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Cesium.Cartographic.</span><span style="color:#6F42C1;">fromCartesian</span><span style="color:#24292E;">(cartesian3)</span></span>
<span class="line"><span style="color:#6A737D;">//方法二: 首先需要获取到当下场景中的ellipsoid对象</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> cartographic </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ellipsoid.</span><span style="color:#6F42C1;">cartesianToCartographic</span><span style="color:#24292E;">(cartesian3)</span></span></code></pre></div><h4 id="角度经纬度-弧度经纬度-直接" tabindex="-1">角度经纬度 =&gt; 弧度经纬度（直接） <a class="header-anchor" href="#角度经纬度-弧度经纬度-直接" aria-label="Permalink to &quot;角度经纬度 =&gt; 弧度经纬度（直接）&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> radians </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Cesium.Math.toRadians（degrees）</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> radians </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Cesium.Math.toRadians（degrees）</span></span></code></pre></div><h4 id="弧度经纬度-角度经纬度-直接" tabindex="-1">弧度经纬度 =&gt; 角度经纬度（直接） <a class="header-anchor" href="#弧度经纬度-角度经纬度-直接" aria-label="Permalink to &quot;弧度经纬度 =&gt; 角度经纬度（直接）&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> degrees </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Cesium.Math.toDegrees（radians）</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> degrees </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Cesium.Math.toDegrees（radians）</span></span></code></pre></div><h2 id="五、拾取cartesian3坐标-demo" tabindex="-1">五、拾取Cartesian3坐标 Demo <a class="header-anchor" href="#五、拾取cartesian3坐标-demo" aria-label="Permalink to &quot;五、拾取Cartesian3坐标 Demo&quot;">​</a></h2><h3 id="_1、camera-globe-pick-ray-scene-result" tabindex="-1">1、<code>camera.globe.pick(ray, scene, result)</code> <a class="header-anchor" href="#_1、camera-globe-pick-ray-scene-result" aria-label="Permalink to &quot;1、\`camera.globe.pick(ray, scene, result)\`&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 首先需要注册cesium鼠标事件，通过cesium的ScreenSpaceEventHandler函数处理用户输入事件</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> handler </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> Cesium.</span><span style="color:#B392F0;">ScreenSpaceEventHandler</span><span style="color:#E1E4E8;">(viewer.scene.canvas)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 设置要在输入事件上执行的功能，官方文档查询ScreenSpaceEventType可以看到所有的cesium鼠标事件</span></span>
<span class="line"><span style="color:#E1E4E8;">  handler.</span><span style="color:#B392F0;">setInputAction</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">movement</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ray</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> viewer.camera.</span><span style="color:#B392F0;">getPickRay</span><span style="color:#E1E4E8;">(movement.position);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">ray) </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">cartesian3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> globe.</span><span style="color:#B392F0;">pick</span><span style="color:#E1E4E8;">(ray, viewer.scene);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 防止点击到地球之外报错，加个判断</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (cartesian3 </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> Cesium.</span><span style="color:#B392F0;">defined</span><span style="color:#E1E4E8;">(cartesian3)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> cartographic </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Cartographic.</span><span style="color:#B392F0;">fromCartesian</span><span style="color:#E1E4E8;">(cartesian3</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> lng </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Math.</span><span style="color:#B392F0;">toDegrees</span><span style="color:#E1E4E8;">(cartographic.longitude)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> lat </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Math.</span><span style="color:#B392F0;">toDegrees</span><span style="color:#E1E4E8;">(cartographic.latitude)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> height </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> cartographic.height;</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(lng, lat, height);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }, Cesium.ScreenSpaceEventType.</span><span style="color:#79B8FF;">LEFT_CLICK</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 首先需要注册cesium鼠标事件，通过cesium的ScreenSpaceEventHandler函数处理用户输入事件</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> handler </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">ScreenSpaceEventHandler</span><span style="color:#24292E;">(viewer.scene.canvas)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 设置要在输入事件上执行的功能，官方文档查询ScreenSpaceEventType可以看到所有的cesium鼠标事件</span></span>
<span class="line"><span style="color:#24292E;">  handler.</span><span style="color:#6F42C1;">setInputAction</span><span style="color:#24292E;">((</span><span style="color:#E36209;">movement</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ray</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> viewer.camera.</span><span style="color:#6F42C1;">getPickRay</span><span style="color:#24292E;">(movement.position);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">!</span><span style="color:#24292E;">ray) </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">cartesian3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> globe.</span><span style="color:#6F42C1;">pick</span><span style="color:#24292E;">(ray, viewer.scene);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 防止点击到地球之外报错，加个判断</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (cartesian3 </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">defined</span><span style="color:#24292E;">(cartesian3)) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> cartographic </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Cartographic.</span><span style="color:#6F42C1;">fromCartesian</span><span style="color:#24292E;">(cartesian3</span><span style="color:#D73A49;">!</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> lng </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Math.</span><span style="color:#6F42C1;">toDegrees</span><span style="color:#24292E;">(cartographic.longitude)</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> lat </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Math.</span><span style="color:#6F42C1;">toDegrees</span><span style="color:#24292E;">(cartographic.latitude)</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> height </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> cartographic.height;</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(lng, lat, height);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  }, Cesium.ScreenSpaceEventType.</span><span style="color:#005CC5;">LEFT_CLICK</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="_2、-camera-pickellipsoid-windowcoordinates-ellipsoid" tabindex="-1">2、 <code>camera.pickEllipsoid（windowCoordinates,ellipsoid）</code> <a class="header-anchor" href="#_2、-camera-pickellipsoid-windowcoordinates-ellipsoid" aria-label="Permalink to &quot;2、 \`camera.pickEllipsoid（windowCoordinates,ellipsoid）\`&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 首先需要注册cesium鼠标事件，通过cesium的ScreenSpaceEventHandler函数处理用户输入事件</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> handler </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> Cesium.</span><span style="color:#B392F0;">ScreenSpaceEventHandler</span><span style="color:#E1E4E8;">(viewer.scene.canvas)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 设置要在输入事件上执行的功能，官方文档查询ScreenSpaceEventType可以看到所有的cesium鼠标事件</span></span>
<span class="line"><span style="color:#E1E4E8;">  handler.</span><span style="color:#B392F0;">setInputAction</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">movement</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> cartesian3 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> viewer.scene.camera.</span><span style="color:#B392F0;">pickEllipsoid</span><span style="color:#E1E4E8;">(movement.position, viewer.scene.globe.ellipsoid)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 防止点击到地球之外报错，加个判断</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (cartesian3 </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> Cesium.</span><span style="color:#B392F0;">defined</span><span style="color:#E1E4E8;">(cartesian3)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> cartographic </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Cartographic.</span><span style="color:#B392F0;">fromCartesian</span><span style="color:#E1E4E8;">(cartesian3</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> lng </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Math.</span><span style="color:#B392F0;">toDegrees</span><span style="color:#E1E4E8;">(cartographic.longitude)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> lat </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Math.</span><span style="color:#B392F0;">toDegrees</span><span style="color:#E1E4E8;">(cartographic.latitude)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> height </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> cartographic.height;</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(lng, lat, height);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }, Cesium.ScreenSpaceEventType.</span><span style="color:#79B8FF;">LEFT_CLICK</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 首先需要注册cesium鼠标事件，通过cesium的ScreenSpaceEventHandler函数处理用户输入事件</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> handler </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">ScreenSpaceEventHandler</span><span style="color:#24292E;">(viewer.scene.canvas)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 设置要在输入事件上执行的功能，官方文档查询ScreenSpaceEventType可以看到所有的cesium鼠标事件</span></span>
<span class="line"><span style="color:#24292E;">  handler.</span><span style="color:#6F42C1;">setInputAction</span><span style="color:#24292E;">((</span><span style="color:#E36209;">movement</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> cartesian3 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> viewer.scene.camera.</span><span style="color:#6F42C1;">pickEllipsoid</span><span style="color:#24292E;">(movement.position, viewer.scene.globe.ellipsoid)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 防止点击到地球之外报错，加个判断</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (cartesian3 </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">defined</span><span style="color:#24292E;">(cartesian3)) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> cartographic </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Cartographic.</span><span style="color:#6F42C1;">fromCartesian</span><span style="color:#24292E;">(cartesian3</span><span style="color:#D73A49;">!</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> lng </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Math.</span><span style="color:#6F42C1;">toDegrees</span><span style="color:#24292E;">(cartographic.longitude)</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> lat </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Math.</span><span style="color:#6F42C1;">toDegrees</span><span style="color:#24292E;">(cartographic.latitude)</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> height </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> cartographic.height;</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(lng, lat, height);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  }, Cesium.ScreenSpaceEventType.</span><span style="color:#005CC5;">LEFT_CLICK</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="_3、scene-pickposition-windowcoordinates" tabindex="-1">3、<code>scene.pickPosition(windowCoordinates)</code> <a class="header-anchor" href="#_3、scene-pickposition-windowcoordinates" aria-label="Permalink to &quot;3、\`scene.pickPosition(windowCoordinates)\`&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">viewer.screenSpaceEventHandler.</span><span style="color:#B392F0;">setInputAction</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onLeftClick</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">movement</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">pickedFeature</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> viewer.scene.</span><span style="color:#B392F0;">pick</span><span style="color:#E1E4E8;">(movement.position);</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">Cesium.</span><span style="color:#B392F0;">defined</span><span style="color:#E1E4E8;">(pickedFeature)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;">// nothing picked</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">     }</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">worldPosition</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> viewer.scene.</span><span style="color:#B392F0;">pickPosition</span><span style="color:#E1E4E8;">(movement.position);</span></span>
<span class="line"><span style="color:#E1E4E8;">}, Cesium.ScreenSpaceEventType.</span><span style="color:#79B8FF;">LEFT_CLICK</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">viewer.screenSpaceEventHandler.</span><span style="color:#6F42C1;">setInputAction</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onLeftClick</span><span style="color:#24292E;">(</span><span style="color:#E36209;">movement</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">pickedFeature</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> viewer.scene.</span><span style="color:#6F42C1;">pick</span><span style="color:#24292E;">(movement.position);</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">!</span><span style="color:#24292E;">Cesium.</span><span style="color:#6F42C1;">defined</span><span style="color:#24292E;">(pickedFeature)) {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6A737D;">// nothing picked</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#D73A49;">return</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">     }</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">worldPosition</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> viewer.scene.</span><span style="color:#6F42C1;">pickPosition</span><span style="color:#24292E;">(movement.position);</span></span>
<span class="line"><span style="color:#24292E;">}, Cesium.ScreenSpaceEventType.</span><span style="color:#005CC5;">LEFT_CLICK</span><span style="color:#24292E;">);</span></span></code></pre></div><h2 id="六、矩阵转换" tabindex="-1">六、矩阵转换 <a class="header-anchor" href="#六、矩阵转换" aria-label="Permalink to &quot;六、矩阵转换&quot;">​</a></h2><blockquote><p>1、Cesium中物体的移动、缩放、平移都可以用变换矩阵来计算。</p><p>2、变换（tansformation）可是理解为一个函数，实现将一个空间坐标映射为另一个空间坐标，矩阵（matrix）是这种计算的一种方式，在三维开发中用途广泛。</p></blockquote><p><a href="https://blog.csdn.net/u011575168/article/details/83097894" target="_blank" rel="noreferrer">https://blog.csdn.net/u011575168/article/details/83097894</a></p>`,46),r=[c];function E(y,i,A,d,F,C){return a(),n("div",null,r)}const g=s(t,[["render",E]]);export{h as __pageData,g as default};
