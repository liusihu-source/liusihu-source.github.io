import{_ as i,c as a,a2 as l,o as t}from"./chunks/framework.BQmytedh.js";const n="/assets/640.DM7E7zBc.png",h="/assets/640-1708955398589-3.BTiHy_mi.png",F=JSON.parse('{"title":"mysql-JavaScript","description":"","frontmatter":{},"headers":[],"relativePath":"个人/其他/mysql-JavaScript.md","filePath":"个人/其他/mysql-JavaScript.md","lastUpdated":1767767988000}'),p={name:"个人/其他/mysql-JavaScript.md"};function e(k,s,r,d,c,o){return t(),a("div",null,s[0]||(s[0]=[l('<h1 id="mysql-javascript" tabindex="-1">mysql-JavaScript <a class="header-anchor" href="#mysql-javascript" aria-label="Permalink to &quot;mysql-JavaScript&quot;">​</a></h1><blockquote><p><a href="https://www.graalvm.org/" target="_blank" rel="noreferrer">https://www.graalvm.org/</a></p><p><a href="https://mp.weixin.qq.com/s/5XGhgs5PI9RPwHD0RjbroA" target="_blank" rel="noreferrer">https://mp.weixin.qq.com/s/5XGhgs5PI9RPwHD0RjbroA</a></p></blockquote><h2 id="一、javascript存储过程" tabindex="-1">一、JavaScript存储过程 <a class="header-anchor" href="#一、javascript存储过程" aria-label="Permalink to &quot;一、JavaScript存储过程&quot;">​</a></h2><p>当需要持久性存储时，<code>MySQL</code> 作为最流行的开源数据库，将成为 <code>JavaScript</code> 开发人员的自然选择。通过支持存储过程中的 <code>JavaScript</code>，开发人员将能够用熟悉的语言编写 <code>MySQL</code> 存储过程，并利用广泛的 <code>JavaScript</code> 生态系统！</p><p>存储过程通过减少数据库服务器和应用程序之间的数据移动，提供了一个重要的优势。</p><ul><li>这需要耗费时间，并且可能会导致网络开销增加。</li><li>当应用程序进行频繁交互时，增加的延迟可能会变得明显。</li><li>在中间层或应用层处理大容量数据需要大量的内存和存储资源，增加了成本。</li><li>由于安全风险和数据保护要求，通常需要避免在机器之间传输大量数据，尤其是在云环境中。</li><li>将大量数据移出数据库服务，将增加出口费用。</li></ul><p><img src="'+n+'" alt="图片"></p><h2 id="二、使用" tabindex="-1">二、使用 <a class="header-anchor" href="#二、使用" aria-label="Permalink to &quot;二、使用&quot;">​</a></h2><h3 id="_2-1-概述" tabindex="-1">2.1 概述 <a class="header-anchor" href="#_2-1-概述" aria-label="Permalink to &quot;2.1 概述&quot;">​</a></h3><p><code>MySQL</code> 现在引入了对 <code>JavaScript</code> 存储过程的支持，用户现在可以在数据库内部表达丰富的过程逻辑。<code>JavaScript</code> 运行时通过 <code>GraalVM</code> 集成，用户可以免费使用 <code>GraalVM</code> 企业版（EE）的所有功能，如编译器优化、性能和安全功能。</p><p>此版本支持以下功能：</p><ul><li>基于 <code>ECMAScript 2021</code> 的 <code>JavaScript</code> 语言</li><li>存储过程和存储函数</li><li><code>MySQL</code> 数据类型，如各种整数、浮点数和 <code>CHAR/VARCHAR</code> 类型</li></ul><p><img src="'+h+`" alt="图片"></p><h3 id="_2-2-定义javascript存储过程" tabindex="-1">2.2 定义JavaScript存储过程 <a class="header-anchor" href="#_2-2-定义javascript存储过程" aria-label="Permalink to &quot;2.2 定义JavaScript存储过程&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CREATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FUNCTION</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcd_js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (a </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">INT,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) RETURNS INT </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LANGUAGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> JAVASCRIPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AS</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> $$</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [x, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">y]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [Math.abs(a), Math.abs(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)];</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  while(y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) [x, y] = [y, x % y];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$$</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p><code>JavaScript</code> 代码直接嵌入在 <code>SQL</code> 可调用函数的定义（上面的a 和 b）中。参数的名称可以直接在 <code>JavaScript</code> 代码中引用，在调用函数时，<code>SQL</code> 类型和 <code>JavaScript</code> 类型之间会进行隐式类型转换。</p><h3 id="_2-3-在sql语句中执行javascript" tabindex="-1">2.3 在SQL语句中执行JavaScript <a class="header-anchor" href="#_2-3-在sql语句中执行javascript" aria-label="Permalink to &quot;2.3 在SQL语句中执行JavaScript&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> col1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> col2,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcd_js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">col1,col2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my_table</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcd_js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">col1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> col2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ORDER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcd_js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">col1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> col2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CREATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TABLE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcd_table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SELECT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcd_js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">col1,col2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my_table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div>`,18)]))}const g=i(p,[["render",e]]);export{F as __pageData,g as default};
