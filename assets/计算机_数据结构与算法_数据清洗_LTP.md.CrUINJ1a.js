import{_ as i,c as a,a2 as n,o as p}from"./chunks/framework.BQmytedh.js";const l="/assets/image-20240709101257901.CJa4fkgh.png",y=JSON.parse('{"title":"LTP","description":"","frontmatter":{},"headers":[],"relativePath":"计算机/数据结构与算法/数据清洗/LTP.md","filePath":"计算机/数据结构与算法/数据清洗/LTP.md","lastUpdated":1767767988000}'),h={name:"计算机/数据结构与算法/数据清洗/LTP.md"};function t(k,s,e,E,r,d){return p(),a("div",null,s[0]||(s[0]=[n(`<h1 id="ltp" tabindex="-1">LTP <a class="header-anchor" href="#ltp" aria-label="Permalink to &quot;LTP&quot;">​</a></h1><blockquote><p><a href="https://ltp.ai/" target="_blank" rel="noreferrer">https://ltp.ai/</a></p><p><a href="https://www.bilibili.com/video/BV1RM411F7XA/?spm_id_from=333.880.my_history.page.click&amp;vd_source=c3aed98126d5ffa7b2c72cf011d9383c" target="_blank" rel="noreferrer">https://www.bilibili.com/video/BV1RM411F7XA/?spm_id_from=333.880.my_history.page.click&amp;vd_source=c3aed98126d5ffa7b2c72cf011d9383c</a></p></blockquote><h2 id="一、官网文档测试代码如下" tabindex="-1">一、官网文档测试代码如下 <a class="header-anchor" href="#一、官网文档测试代码如下" aria-label="Permalink to &quot;一、官网文档测试代码如下&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ltp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StnSplit</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ltp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> LTP</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 句子分词</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 返回的sents是数组</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> split_sentence</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StnSplit().split(name)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sents)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # [&#39;汤姆生病了。&#39;, &#39;他去了医院。&#39;]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 数组句子分词：如果句子过长，可以将一章内容分段落存储，并依次分句</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> split_arr_sentence</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(arr: []):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StnSplit().batch_split(arr)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sents)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # [&#39;他叫汤姆去拿外衣。&#39;, &#39;汤姆生病了。&#39;, &#39;他去了医院。&#39;]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单词分词</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># pipeline 会返回元祖对象，对象每个要素为二维数组，分词结果标注r v nh等含义见附录-词性标注集</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> split_arr_word</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    words </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ltp.pipeline(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;全省天气预报#辽宁#28日早晨到傍晚，大连、抚顺、本溪、丹东、阜新、朝阳地区及康平、法库、岫岩、昌图、建昌有中雨到大雨，局部有暴雨，个别乡镇（街道）有大暴雨，其他地区有阵雨或雷阵雨，上述地区局部伴有短时强降水、雷暴大风、冰雹等强对流天气，最大小时降水量为40到80毫米，雷雨时最大瞬时风力8级到9级；全省最高气温27度到31度。28日夜间到29日白天，大连、丹东地区及岫岩有暴雨，局部有大暴雨，抚顺、本溪、营口、辽阳地区及鞍山市区、海城有中雨到大雨，局部有暴雨，其他地区有阵雨或雷阵雨，上述地区局部伴有短时强降水、雷暴大风、冰雹等强对流天气，最大小时降水量为40到80毫米，雷雨时最大瞬时风力8级到9级；全省最低气温22度到25度。29日夜间到30日白天，大连、本溪、丹东、营口、葫芦岛地区及岫岩有中雨到大雨，个别乡镇（街道）有暴雨，其他地区有阵雨或雷阵雨，上述地区局部伴有短时强降水、雷暴大风、冰雹等强对流天气。30日夜间，葫芦岛地区有中雨到大雨，大连、鞍山、锦州、营口、辽阳、朝阳、盘锦地区有阵雨或雷阵雨，其他地区多云。地质灾害风险预警信息：辽宁省自然资源厅与辽宁省气象局联合发布地质灾害气象风险预警信息。07月28日08时至07月28日20时&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        tasks</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cws&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">return_dict</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(words)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ([[&#39;全省&#39;, &#39;天气&#39;, &#39;预报&#39;, &#39;#&#39;, &#39;辽宁&#39;, &#39;#&#39;, &#39;28日&#39;, &#39;早晨&#39;, &#39;到&#39;, &#39;傍晚&#39;, &#39;，&#39;, &#39;大连&#39;, &#39;、&#39;, &#39;抚顺&#39;, &#39;、&#39;, &#39;本溪&#39;, &#39;、&#39;, &#39;丹东&#39;, &#39;、&#39;, &#39;阜新&#39;, &#39;、&#39;, &#39;朝阳&#39;, &#39;地区&#39;, &#39;及康平&#39;, &#39;、&#39;, &#39;法库&#39;, &#39;、&#39;, &#39;岫岩&#39;, &#39;、&#39;, &#39;昌图&#39;, &#39;、&#39;, &#39;建昌&#39;, &#39;有&#39;, &#39;中雨&#39;, &#39;到&#39;, &#39;大雨&#39;, &#39;，&#39;, &#39;局部&#39;, &#39;有&#39;, &#39;暴雨&#39;, &#39;，&#39;, &#39;个别&#39;, &#39;乡&#39;, &#39;镇&#39;, &#39;（&#39;, &#39;街道&#39;, &#39;）&#39;, &#39;有&#39;, &#39;大暴雨&#39;, &#39;，&#39;, &#39;其他&#39;, &#39;地区&#39;, &#39;有&#39;, &#39;阵雨&#39;, &#39;或&#39;, &#39;雷阵雨&#39;, &#39;，&#39;, &#39;上述&#39;, &#39;地区&#39;, &#39;局部&#39;, &#39;伴&#39;, &#39;有&#39;, &#39;短&#39;, &#39;时&#39;, &#39;强&#39;, &#39;降水&#39;, &#39;、&#39;, &#39;雷暴&#39;, &#39;大风&#39;, &#39;、&#39;, &#39;冰雹&#39;, &#39;等&#39;, &#39;强&#39;, &#39;对流&#39;, &#39;天气&#39;, &#39;，&#39;, &#39;最&#39;, &#39;大&#39;, &#39;小时&#39;, &#39;降水量&#39;, &#39;为&#39;, &#39;40&#39;, &#39;到&#39;, &#39;80&#39;, &#39;毫米&#39;, &#39;，&#39;, &#39;雷雨&#39;, &#39;时&#39;, &#39;最&#39;, &#39;大&#39;, &#39;瞬时&#39;, &#39;风力&#39;, &#39;8&#39;, &#39;级&#39;, &#39;到&#39;, &#39;9&#39;, &#39;级&#39;, &#39;；&#39;, &#39;全省&#39;, &#39;最高&#39;, &#39;气温&#39;, &#39;27&#39;, &#39;度&#39;, &#39;到&#39;, &#39;31&#39;, &#39;度&#39;, &#39;。&#39;, &#39;28日&#39;, &#39;夜间&#39;, &#39;到&#39;, &#39;29日&#39;, &#39;白天&#39;, &#39;，&#39;, &#39;大连&#39;, &#39;、&#39;, &#39;丹东&#39;, &#39;地区&#39;, &#39;及&#39;, &#39;岫岩&#39;, &#39;有&#39;, &#39;暴雨&#39;, &#39;，&#39;, &#39;局部&#39;, &#39;有&#39;, &#39;大暴雨&#39;, &#39;，&#39;, &#39;抚顺&#39;, &#39;、&#39;, &#39;本溪&#39;, &#39;、&#39;, &#39;营口&#39;, &#39;、&#39;, &#39;辽阳&#39;, &#39;地区&#39;, &#39;及&#39;, &#39;鞍山&#39;, &#39;市区&#39;, &#39;、&#39;, &#39;海城&#39;, &#39;有&#39;, &#39;中雨&#39;, &#39;到&#39;, &#39;大雨&#39;, &#39;，&#39;, &#39;局部&#39;, &#39;有&#39;, &#39;暴雨&#39;, &#39;，&#39;, &#39;其他&#39;, &#39;地区&#39;, &#39;有&#39;, &#39;阵雨&#39;, &#39;或&#39;, &#39;雷阵雨&#39;, &#39;，&#39;, &#39;上述&#39;, &#39;地区&#39;, &#39;局部&#39;, &#39;伴&#39;, &#39;有&#39;, &#39;短&#39;, &#39;时&#39;, &#39;强&#39;, &#39;降水&#39;, &#39;、&#39;, &#39;雷暴&#39;, &#39;大风&#39;, &#39;、&#39;, &#39;冰雹&#39;, &#39;等&#39;, &#39;强&#39;, &#39;对流&#39;, &#39;天气&#39;, &#39;，&#39;, &#39;最&#39;, &#39;大小时&#39;, &#39;降水量&#39;, &#39;为&#39;, &#39;40&#39;, &#39;到&#39;, &#39;80&#39;, &#39;毫米&#39;, &#39;，&#39;, &#39;雷雨&#39;, &#39;时&#39;, &#39;最&#39;, &#39;大瞬&#39;, &#39;时&#39;, &#39;风力&#39;, &#39;8&#39;, &#39;级&#39;, &#39;到&#39;, &#39;9&#39;, &#39;级&#39;, &#39;；&#39;, &#39;全省&#39;, &#39;最低&#39;, &#39;气温&#39;, &#39;22&#39;, &#39;度&#39;, &#39;到&#39;, &#39;25&#39;, &#39;度&#39;, &#39;。&#39;, &#39;29日&#39;, &#39;夜间&#39;, &#39;到&#39;, &#39;30日&#39;, &#39;白天&#39;, &#39;，&#39;, &#39;大连&#39;, &#39;、&#39;, &#39;本溪&#39;, &#39;、&#39;, &#39;丹东&#39;, &#39;、营口&#39;, &#39;、&#39;, &#39;葫&#39;, &#39;芦岛&#39;, &#39;地区&#39;, &#39;及&#39;, &#39;岫岩&#39;, &#39;有&#39;, &#39;中雨&#39;, &#39;到&#39;, &#39;大雨&#39;, &#39;，&#39;, &#39;个别乡镇&#39;, &#39;（&#39;, &#39;街道&#39;, &#39;）&#39;, &#39;有暴雨&#39;, &#39;，&#39;, &#39;其他&#39;, &#39;地区&#39;, &#39;有&#39;, &#39;阵雨&#39;, &#39;或&#39;, &#39;雷阵雨&#39;, &#39;，&#39;, &#39;上述&#39;, &#39;地区&#39;, &#39;局部&#39;, &#39;伴&#39;, &#39;有&#39;, &#39;短时&#39;, &#39;强&#39;, &#39;降水&#39;, &#39;、&#39;, &#39;雷暴&#39;, &#39;大风&#39;, &#39;、&#39;, &#39;冰雹&#39;, &#39;等&#39;, &#39;强&#39;, &#39;对流&#39;, &#39;天气&#39;, &#39;。&#39;, &#39;30日&#39;, &#39;夜间&#39;, &#39;，&#39;, &#39;葫芦岛&#39;, &#39;地区&#39;, &#39;有&#39;, &#39;中雨&#39;, &#39;到&#39;, &#39;大雨&#39;, &#39;，&#39;, &#39;大连&#39;, &#39;、&#39;, &#39;鞍山&#39;, &#39;、&#39;, &#39;锦州&#39;, &#39;、&#39;, &#39;营口&#39;, &#39;、&#39;, &#39;辽阳&#39;, &#39;、&#39;, &#39;朝阳&#39;, &#39;、&#39;, &#39;盘&#39;, &#39;锦&#39;, &#39;地区&#39;, &#39;有&#39;, &#39;阵雨&#39;, &#39;或&#39;, &#39;雷阵雨&#39;, &#39;，&#39;, &#39;其他&#39;, &#39;地区&#39;, &#39;多&#39;, &#39;云&#39;, &#39;。&#39;, &#39;地质&#39;, &#39;灾害&#39;, &#39;风险&#39;, &#39;预警&#39;, &#39;信息&#39;, &#39;：&#39;, &#39;辽宁省&#39;, &#39;自然&#39;, &#39;资源厅&#39;, &#39;与&#39;, &#39;辽宁省气象局&#39;, &#39;联合&#39;, &#39;发布&#39;, &#39;地质&#39;, &#39;灾害&#39;, &#39;气象风险&#39;, &#39;预警&#39;, &#39;信息&#39;, &#39;。&#39;, &#39;07月&#39;, &#39;28日&#39;, &#39;08时&#39;, &#39;至&#39;, &#39;07月&#39;, &#39;28日&#39;, &#39;20&#39;, &#39;时&#39;]],)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 词性标注</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> split_arr_word_lab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ltp.pipeline(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;全省天气预报#辽宁#28日早晨到傍晚，大连、抚顺、本溪、丹东、阜新、朝阳地区及康平、法库、岫岩、昌图、建昌有中雨到大雨，局部有暴雨，个别乡镇（街道）有大暴雨，其他地区有阵雨或雷阵雨，上述地区局部伴有短时强降水、雷暴大风、冰雹等强对流天气，最大小时降水量为40到80毫米，雷雨时最大瞬时风力8级到9级；全省最高气温27度到31度。28日夜间到29日白天，大连、丹东地区及岫岩有暴雨，局部有大暴雨，抚顺、本溪、营口、辽阳地区及鞍山市区、海城有中雨到大雨，局部有暴雨，其他地区有阵雨或雷阵雨，上述地区局部伴有短时强降水、雷暴大风、冰雹等强对流天气，最大小时降水量为40到80毫米，雷雨时最大瞬时风力8级到9级；全省最低气温22度到25度。29日夜间到30日白天，大连、本溪、丹东、营口、葫芦岛地区及岫岩有中雨到大雨，个别乡镇（街道）有暴雨，其他地区有阵雨或雷阵雨，上述地区局部伴有短时强降水、雷暴大风、冰雹等强对流天气。30日夜间，葫芦岛地区有中雨到大雨，大连、鞍山、锦州、营口、辽阳、朝阳、盘锦地区有阵雨或雷阵雨，其他地区多云。地质灾害风险预警信息：辽宁省自然资源厅与辽宁省气象局联合发布地质灾害气象风险预警信息。07月28日08时至07月28日20时&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        tasks</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cws&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pos&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result.pos)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # [[&#39;n&#39;, &#39;n&#39;, &#39;v&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;nt&#39;, &#39;nt&#39;, &#39;p&#39;, &#39;nt&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;n&#39;, &#39;c&#39;, &#39;wp&#39;, &#39;j&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;v&#39;, &#39;v&#39;, &#39;n&#39;, &#39;p&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;v&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;a&#39;, &#39;n&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;v&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;r&#39;, &#39;n&#39;, &#39;v&#39;, &#39;n&#39;, &#39;c&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;b&#39;, &#39;n&#39;, &#39;n&#39;, &#39;v&#39;, &#39;v&#39;, &#39;a&#39;, &#39;n&#39;, &#39;a&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;u&#39;, &#39;a&#39;, &#39;v&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;d&#39;, &#39;n&#39;, &#39;n&#39;, &#39;n&#39;, &#39;v&#39;, &#39;m&#39;, &#39;p&#39;, &#39;m&#39;, &#39;q&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;n&#39;, &#39;d&#39;, &#39;a&#39;, &#39;nt&#39;, &#39;n&#39;, &#39;m&#39;, &#39;q&#39;, &#39;p&#39;, &#39;m&#39;, &#39;q&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;a&#39;, &#39;n&#39;, &#39;m&#39;, &#39;q&#39;, &#39;v&#39;, &#39;m&#39;, &#39;q&#39;, &#39;wp&#39;, &#39;nt&#39;, &#39;nt&#39;, &#39;p&#39;, &#39;nt&#39;, &#39;nt&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;n&#39;, &#39;c&#39;, &#39;ns&#39;, &#39;v&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;v&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;n&#39;, &#39;c&#39;, &#39;ns&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;v&#39;, &#39;n&#39;, &#39;v&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;v&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;r&#39;, &#39;n&#39;, &#39;v&#39;, &#39;n&#39;, &#39;c&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;b&#39;, &#39;n&#39;, &#39;n&#39;, &#39;v&#39;, &#39;v&#39;, &#39;a&#39;, &#39;n&#39;, &#39;a&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;u&#39;, &#39;a&#39;, &#39;n&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;d&#39;, &#39;a&#39;, &#39;n&#39;, &#39;v&#39;, &#39;m&#39;, &#39;p&#39;, &#39;m&#39;, &#39;q&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;n&#39;, &#39;d&#39;, &#39;n&#39;, &#39;n&#39;, &#39;n&#39;, &#39;m&#39;, &#39;q&#39;, &#39;v&#39;, &#39;m&#39;, &#39;q&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;a&#39;, &#39;n&#39;, &#39;m&#39;, &#39;q&#39;, &#39;p&#39;, &#39;m&#39;, &#39;q&#39;, &#39;wp&#39;, &#39;nt&#39;, &#39;nt&#39;, &#39;v&#39;, &#39;nt&#39;, &#39;nt&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;ns&#39;, &#39;n&#39;, &#39;c&#39;, &#39;ns&#39;, &#39;v&#39;, &#39;n&#39;, &#39;v&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;v&#39;, &#39;wp&#39;, &#39;r&#39;, &#39;n&#39;, &#39;v&#39;, &#39;n&#39;, &#39;c&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;b&#39;, &#39;n&#39;, &#39;n&#39;, &#39;v&#39;, &#39;v&#39;, &#39;a&#39;, &#39;a&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;u&#39;, &#39;a&#39;, &#39;n&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;nt&#39;, &#39;nt&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;n&#39;, &#39;v&#39;, &#39;n&#39;, &#39;v&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;ns&#39;, &#39;n&#39;, &#39;v&#39;, &#39;n&#39;, &#39;c&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;r&#39;, &#39;n&#39;, &#39;a&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;n&#39;, &#39;n&#39;, &#39;n&#39;, &#39;v&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;ns&#39;, &#39;b&#39;, &#39;n&#39;, &#39;c&#39;, &#39;ns&#39;, &#39;v&#39;, &#39;v&#39;, &#39;n&#39;, &#39;n&#39;, &#39;n&#39;, &#39;v&#39;, &#39;n&#39;, &#39;wp&#39;, &#39;nt&#39;, &#39;m&#39;, &#39;m&#39;, &#39;p&#39;, &#39;nt&#39;, &#39;m&#39;, &#39;m&#39;, &#39;n&#39;]]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 命名实体识别</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> entity_identify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ltp.pipeline([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;杜甫和李白在南京买辣条吃。&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tasks</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cws&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ner&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result.ner[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # [[(&#39;Nh&#39;, &#39;王阳明&#39;, 0, 0), (&#39;Nh&#39;, &#39;李白&#39;, 2, 2), (&#39;Ns&#39;, &#39;北京&#39;, 4, 4)]]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # for item in result.ner[0]:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #     if item[0] == &#39;Ns&#39;:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #         print(item[1])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Press the green button in the gutter to run the script.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;__main__&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ltp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LTP()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # split_sentence(&#39;汤姆生病了。他去了医院。&#39;)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # split_arr_sentence([&quot;他叫汤姆去拿外衣。&quot;, &quot;汤姆生病了。他去了医院。&quot;])</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # split_arr_word()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # split_arr_word_lab()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    entity_identify()</span></span></code></pre></div><p>💡 最终反馈的结果内容含义 <a href="https://ltp.ai/docs/appendix.html" target="_blank" rel="noreferrer">https://ltp.ai/docs/appendix.html</a></p><h2 id="二、分词及词性标注" tabindex="-1">二、分词及词性标注 <a class="header-anchor" href="#二、分词及词性标注" aria-label="Permalink to &quot;二、分词及词性标注&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pandas </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pd</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ltp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> LTP</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tqdm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tqdm</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 读取Excel文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> read_excel_file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file_path, sheet_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pd.read_excel(file_path, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sheet_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sheet_name)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用LTP进行分词和词性标注</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process_text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(text):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ltp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LTP()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ltp.pipeline([text], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tasks</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cws&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pos&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 将处理结果写入新文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> write_results_to_file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(results):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    df </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pd.DataFrame(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">columns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;A&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;B&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index, sentence </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> enumerate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(results):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        df.loc[index, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;A&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sentence.cws[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        df.loc[index, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;B&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sentence.pos[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    df.to_excel(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0803_other_output.xlsx&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 主函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 读取Excel文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    excel_file </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;0803_其他区域8245.xlsx&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Excel文件路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    df </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> read_excel_file(excel_file)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 提取source列</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    source_texts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> df[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;微博正文&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].tolist()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 存储处理结果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    processed_results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 使用LTP进行处理</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tqdm(source_texts):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        pos_result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process_text(text)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        processed_results.append(pos_result)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    write_results_to_file(processed_results)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;__main__&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    main()</span></span></code></pre></div><p><img src="`+l+'" alt="image-20240709101257901"></p><p>💡 后续可用这些词性如Ns 、 Ni 适当提取地名</p>',9)]))}const c=i(h,[["render",t]]);export{y as __pageData,c as default};
